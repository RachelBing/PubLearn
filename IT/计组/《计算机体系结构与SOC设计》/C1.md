![](Pasted%20image%2020240621155732.png)



指令集架构
	基本
	增强
处理器架构
	核心数
	超标量：X发射X执行
	流水线：深度乱序
	缓存结构：协议
	特性：数据预取
	中断控制：私有/公有
	调试框架：自定义，接口兼容



多核子系统
	CIU 一致性接口单元 [ARMv8-缓存一致性（cache coherency）解决方案：MOESI protocol-CSDN博客](https://blog.csdn.net/luolaihua2018/article/details/129369336)
	L2 Cache
	AXI 4.0 主从设备接口
	PLIC 中断控制
	计时器

核内子系统
	IFU 指令提取
	IDU 指令译码
	IU + FPU
		IU：整型
			ALU 算数逻辑
			MULT 乘法
			DIV 除法
			BJU 跳转
		FPU：浮点
			FALU
			FDSU
			FMAU
	LSU 加载存储
	RTU 指令退休
	MMU 内存管理
	PMP 物理内存保护

### Q&A


1、地址对齐？为什么会访问更快

2、函数调用时寄存器窗口滑动 

3、为什么异常和中断要切到机器（最高权限-寄存器）模式下响应

4、模块间关系：解耦，紧耦合

5、CIU降低软件维护成本？TLB， I cache

6、内存回写，缓冲器：回填、牺牲

直写式和回写式是缓冲区内存的两种工作方式。

直写(Write Through)
	当 CPU 要将数据写入内存时,除了更新缓冲内存上的数据外,还要数据写在 DRAM 中，以维持主存与缓冲内存的一致性，当要写入内存的数据一多 ，速度自然就慢了下来。
	在直写式规定中，处理器会直接将高速缓存中的数据写入主内存。直至将数据存储至主内存，写入循环才能完成。

回写（Write Back）
	当 CPU 要将数据写入内存时 ,只会先更新缓冲内存上的数据, 随后再让缓冲内存在总线不塞车的时候 ,才把数据写回 DRAM 所以速度自然快得多。
	在回写式规定中，高速缓存将充当缓冲区。处理器开始写入循环时，高速缓存将接收数据并停止循环。当系统总线可用时，高速缓存再将数据写回主内存。

两种方式各有利弊，直写缓存方法利用了高速缓存中的数据始终与主存储器中数据匹配的特点。但是，需要的总线周期却非常耗时，从而降低性能。回写缓存可以维持性能，因为写入始终是在“爆发”中进行的，因而运行所需的总线周期将大大减少。

7、系统、CPU时钟比例；模块工作频率和CPU一致，能用上位软件配置

8、高速缓存路预测，指令关注实现周期，硬件、软件回填






